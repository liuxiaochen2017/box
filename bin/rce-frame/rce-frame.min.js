var __reflect=this&&this.__reflect||function(e,t,n){e.__class__=t,n?n.push(t):n=[t],e.__types__=e.__types__?n.concat(e.__types__):n},__extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);n.prototype=t.prototype,e.prototype=new n},rce;!function(e){var t=function(){function e(){this.hashCode=e._count=e._count+1}return Object.defineProperty(e,"count",{get:function(){return this._count},enumerable:!0,configurable:!0}),e._count=0,e}();e.HashObject=t,__reflect(t.prototype,"rce.HashObject")}(rce||(rce={}));var rce;!function(e){var t=function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e.mapListeners={},e}return __extends(n,t),n.prototype.addEventListener=function(e,t,n,r){void 0===n&&(n=null),void 0===r&&(r=0);var i=this.mapListeners[e];if(!i)return void(this.mapListeners[e]=[{handle:t,context:n,priority:r}]);var o=i.some(function(e){return e.handle===t&&e.context===n});if(!o){for(var c={handle:t,context:n,priority:r},s=i.length-1;s>=0;s-=1){var a=i[s];if(a.priority>=c.priority)return void i.splice(s,0,c)}i.unshift(c)}},n.prototype.removeEventListener=function(e,t,n){var r=this.mapListeners[e];if(r){for(var i=r.length-1;i>=0;i-=1){var o=r[i];if(o.handle===t&&o.context===n){r.splice(i,1);break}}0===r.length&&delete this.mapListeners[e]}},n.prototype.removeAllListener=function(e){this.mapListeners.hasOwnProperty(e)&&delete this.mapListeners[e]},n.prototype.dispatchWith=function(t,n){this.dispatchEvent(new e.Event(t,n))},n.prototype.dispatchEvent=function(e){var t=this.mapListeners[e.eventType];t&&t.forEach(function(t){return t.handle.call(t.context,e)})},n.prototype.hasEventListener=function(e,t,n){var r=this.mapListeners[e];return r&&r.some(function(e){return e.handle===t&&e.context===n})},n}(e.HashObject);e.EventDispatcher=t,__reflect(t.prototype,"rce.EventDispatcher")}(rce||(rce={}));var rce;!function(e){var t=function(e){function t(t,n){var r=e.call(this)||this;return r.eventType=t,r.data=n,r}return __extends(t,e),t}(e.HashObject);e.Event=t,__reflect(t.prototype,"rce.Event")}(rce||(rce={}));var rce;!function(e){function t(t){switch(t){case"Vue":return new e.VuePlugin;default:throw new Error("插件类型无效："+t+"!")}}var n=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.sendNotice=function(t,r,i,o){n.dispatchEvent(new e.Notice(t,r,i,o))},n.registerBroadcastListener=function(e,t,i){n.dispatchEvent(new r({broadcastType:e,handle:t,context:i}))},n}return __extends(n,t),n}(e.EventDispatcher);e.Plugin=n,__reflect(n.prototype,"rce.Plugin");var r=function(e){function t(n){return e.call(this,t.LISTEN_BROADCAST,n)||this}return __extends(t,e),t.LISTEN_BROADCAST="add_broadcast_listener",t}(e.Event);e.PluginEvent=r,__reflect(r.prototype,"rce.PluginEvent"),e.getPlugin=t}(rce||(rce={}));var rce;!function(e){var t=function(e){function t(n,r){var i=e.call(this,t.EVENT,r)||this;return i.broadcastType=n,i}return __extends(t,e),t.EVENT="SYSTEM.EVENT.BROADCAST",t}(e.Event);e.Broadcast=t,__reflect(t.prototype,"rce.Broadcast")}(rce||(rce={}));var rce;!function(e){var t=function(e){function t(n,r,i,o){var c=e.call(this,t.EVENT,r)||this;return c.noticeType=n,c.whileDone=i,c.context=o,c}return __extends(t,e),t.EVENT="SYSTEM.EVENT.NOTICE",t}(e.Event);e.Notice=t,__reflect(t.prototype,"rce.Notice")}(rce||(rce={}));var rce;!function(e){function t(){return"rce_frame_v_"+t}e.version=t}(rce||(rce={}));var rce;!function(e){var t=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.install=function(e){var t=this;e.mixin({beforeCreate:function(){this.__s=this.$sendNotice=t.sendNotice.bind(t),this.__l=this.$listenBroadcast=t.registerBroadcastListener.bind(t)}})},t}(e.Plugin);e.VuePlugin=t,__reflect(t.prototype,"rce.VuePlugin")}(rce||(rce={}));var rce;!function(e){var t=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.__noticeListeneres=[],n.listenNotice=function(e,t,r){n.__noticeListeneres.push({noticeType:e,handle:t,context:r})},n.__broadcastListeneres=[],n.listenBroadcast=function(e,t,r){n.__broadcastListeneres.push({broadcastType:e,handle:t,context:r})},n.sendNotice=function(t,r,i,o){n.dispatchEvent(new e.Notice(t,r,i,o))},n.sendBroadcast=function(t,r){n.dispatchEvent(new e.Broadcast(t,r))},n.__beforeAppStart=function(e){e.__addNoticeListener.apply(e,n.__noticeListeneres),e.__addBroadcastListener.apply(e,n.__broadcastListeneres)},n.__ln=n.listenNotice,n.__sn=n.sendNotice,n.__sb=n.sendBroadcast,n.__lb=n.listenBroadcast,n}return __extends(n,t),n}(e.EventDispatcher);e.Service=t,__reflect(t.prototype,"rce.Service")}(rce||(rce={}));var rce;!function(e){function t(e,t,n){i.addEventListener(e,t,n)}function n(e,t,n){i.removeEventListener(e,t,n)}function r(e,t){i.dispatchWith(e,t)}var i=new e.EventDispatcher;e.addAction=t,e.removeAction=n,e.doAction=r}(rce||(rce={}));var rce;!function(e){function t(e,t,n,r){var i=window.__extends,o=window.__reflect,c=function(t){function n(){return Array.prototype.unshift.call(arguments,o?o.bind(this):null),e.apply(this,arguments),this}t&&i(n,t);var o=t?function(){var e=null!==t&&t.apply(this,arguments)||this;return e}:null;return r&&r(n.prototype),n}(t);return o(c.prototype,n),c}e.extend=t}(rce||(rce={}));var rce;!function(e){function t(){}e.noop=t}(rce||(rce={}));var rce;!function(e){var t=function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e._serviceArr=[],e._mapNoticeListener={},e._mapBroadcastListener={},e}return __extends(n,t),n.prototype.useService=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];(n=this._serviceArr).push.apply(n,e);var n},n.prototype.start=function(){for(var t=this,n=0,r=this._serviceArr.length;r>n;n+=1)this._serviceArr.forEach(function(n){n.__beforeAppStart(t),n.addEventListener(e.Notice.EVENT,t.receiveNotice,t),n.addEventListener(e.Broadcast.EVENT,t.receiveBroadcast,t)});return Promise.resolve()},n.prototype.__addNoticeListener=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=0,r=e.length;r>n;n+=1){var i=e[n],o=i.noticeType;if(this._mapNoticeListener[o])throw new Error("每个特定的Notice类型消息只能存在唯一一个监听器: "+o);this._mapNoticeListener[o]=i}},n.prototype.receiveNotice=function(e){var t=e.noticeType,n=this._mapNoticeListener[t];return n?void n.handle.call(n.context,e):void console.warn("未处理的通知事件: "+t)},n.prototype.__addBroadcastListener=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=0,r=e.length;r>n;n+=1){var i=e[n],o=i.broadcastType,c=this._mapBroadcastListener[o];c?c.push(i):this._mapBroadcastListener[o]=[i]}},n.prototype.receiveBroadcast=function(e){var t=e.broadcastType,n=this._mapBroadcastListener[t];return n?void n.forEach(function(t){return t.handle.call(t.context,e)}):void console.warn("未处理的广播事件: "+t)},n.prototype.viewPlugin=function(t){var n=this;return this._viewPlugin||(this._viewPlugin=e.getPlugin(t),this._viewPlugin.addEventListener(e.Notice.EVENT,this.receiveNotice,this),this._viewPlugin.addEventListener(e.PluginEvent.LISTEN_BROADCAST,function(e){n.__addBroadcastListener(e.data)})),this._viewPlugin},n}(e.HashObject);e.App=t,__reflect(t.prototype,"rce.App")}(rce||(rce={}));