var __reflect=this&&this.__reflect||function(t,e,r){t.__class__=e,r?r.push(e):r=[e],t.__types__=t.__types__?r.concat(t.__types__):r},__extends=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);r.prototype=e.prototype,t.prototype=new r},rce;!function(t){var e=function(){function t(){this.hashCode=t._count=t._count+1}return Object.defineProperty(t,"count",{get:function(){return this._count},enumerable:!0,configurable:!0}),t._count=0,t}();t.HashObject=e,__reflect(e.prototype,"rce.HashObject")}(rce||(rce={}));var rce;!function(t){var e=function(){function t(t,e,r){this.handle=t,this.context=e,this.priority=r}return t}();__reflect(e.prototype,"Listener");var r=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.mapListeners={},t}return __extends(n,r),n.prototype.addEventListener=function(t,r,n,o){void 0===n&&(n=null),void 0===o&&(o=0);var i=this.mapListeners[t];if(i){var c=i.some(function(t){return t.handle===r&&t.context===n});if(!c){for(var a=new e(r,n,o),s=i.length-1;s>=0;s-=1){var u=i[s];if(u.priority>=a.priority)return void i.splice(s,0,a)}i.unshift(a)}}else this.mapListeners[t]=[new e(r,n,o)]},n.prototype.removeEventListener=function(t,e,r){var n=this.mapListeners[t];if(n){for(var o=n.length-1;o>=0;o-=1){var i=n[o];if(i.handle===e&&i.context===r){n.splice(o,1);break}}0===n.length&&delete this.mapListeners[t]}},n.prototype.removeAllListener=function(t){this.mapListeners.hasOwnProperty(t)&&delete this.mapListeners[t]},n.prototype.dispatchWith=function(e,r){this.dispatchEvent(new t.Event(e,r))},n.prototype.dispatchEvent=function(t){var e=this.mapListeners[t.type];e&&e.forEach(function(e){return e.handle.call(e.context,t)})},n.prototype.hasEventListener=function(t,e,r){var n=this.mapListeners[t];return n&&n.some(function(t){return t.handle===e&&t.context===r})},n}(t.HashObject);t.EventDispatcher=r,__reflect(r.prototype,"rce.EventDispatcher")}(rce||(rce={}));var rce;!function(t){var e=function(t){function e(e,r){var n=t.call(this)||this;return n.type=e,n.data=r,n}return __extends(e,t),e}(t.HashObject);t.Event=e,__reflect(e.prototype,"rce.Event")}(rce||(rce={}));var rce;!function(t){function e(e){return{install:function(r){r.prototype.$sendNotice=function(r,n,o,i){e.sendNotice(new t.Notice(r,n,o,i))},r.prototype.$listen=function(t,e,r){},r.prototype.$config=Object.freeze({})}}}function r(t){}t.VuePlugin=e,t.ReactPlugin=r}(rce||(rce={}));var rce;!function(t){var e=function(){function e(){var t=this;this._serviceArr=[],this._mapNoticeHandle={},this.registerNoticeListener=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];for(var n=e.length-1;n>=0;n-=1){var o=e[n],i=o.type;if(t._mapNoticeHandle.hasOwnProperty(i))throw new Error("noticeType: '"+i+"' 注册重复！");t._mapNoticeHandle[i]=o}}}return e.prototype.registerService=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];(r=this._serviceArr).push.apply(r,t);var r},e.prototype.registerMiddleware=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]},e.prototype.start=function(){return this.beforeStart(this._serviceArr.concat()).then(this.afterStart)["catch"](Promise.reject)},e.prototype.sendNotice=function(t){this.noticeHandle(t.type,t.data,t.callback,t.context)},e.prototype.noticeHandle=function(e,r,n,o){var i=this._mapNoticeHandle[e];if(!i)return void console.warn("未监听的通知类型："+e);var c=i.handle,a=i.once;c.call(i.thisObject,r,n||t.noop,o),a&&delete this._mapNoticeHandle[e]},e.prototype.beforeStart=function(t){var e=this;if(console.log("------ beforeStart ------"),t.length){var r=t.shift();return r.beforeAppStart(this.registerNoticeListener).then(function(){return e.beforeStart(t)})["catch"](Promise.reject)}return Promise.resolve()},e.prototype.afterStart=function(){console.log("------ afterStart ------")},e}();t.App=e,__reflect(e.prototype,"rce.App")}(rce||(rce={}));var rce;!function(t){function e(){return"rce_frame_v_"+e}t.version=e}(rce||(rce={}));var rce;!function(t){var e=function(t){function e(e,r,n,o){var i=t.call(this,e,r)||this;return i.callback=n,i.context=o,i}return __extends(e,t),e}(t.Event);t.Notice=e,__reflect(e.prototype,"rce.Notice")}(rce||(rce={}));var rce;!function(t){var e=function(){function t(){}return t.prototype.afterAppStart=function(){},t}();t.Service=e,__reflect(e.prototype,"rce.Service")}(rce||(rce={}));var rce;!function(t){function e(t,e,r){o.addEventListener(t,e,r)}function r(t,e,r){o.removeEventListener(t,e,r)}function n(t,e){o.dispatchWith(t,e)}var o=new t.EventDispatcher;t.addAction=e,t.removeAction=r,t.doAction=n}(rce||(rce={}));var rce;!function(t){function e(t,e,r,n){var o=window.__extends,i=window.__reflect,c=function(e){function r(){return Array.prototype.unshift.call(arguments,i?i.bind(this):null),t.apply(this,arguments),this}e&&o(r,e);var i=e?function(){var t=null!==e&&e.apply(this,arguments)||this;return t}:null;return n&&n(r.prototype),r}(e);return i(c.prototype,r),c}t.extend=e}(rce||(rce={}));var rce;!function(t){function e(){}t.noop=e}(rce||(rce={}));var rce;!function(t){var e;!function(t){t[t.DEVELOPMENT=0]="DEVELOPMENT",t[t.PRODUCTION=1]="PRODUCTION"}(e=t.ENV||(t.ENV={}))}(rce||(rce={}));